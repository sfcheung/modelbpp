<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="modelbpp">
<title>Get Started • modelbpp</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Heebo-0.4.8/font.css" rel="stylesheet">
<link href="../deps/Red_Hat_Mono-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta property="og:description" content="modelbpp">
<meta property="og:image" content="https://sfcheung.github.io/modelbpp/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">modelbpp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/modelbpp.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>&lt;General&gt;</h6>
    <a class="dropdown-item" href="../articles/modelbpp.html">Get Started</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/modelbpp/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Started</h1>
                        <h4 data-toc-skip class="author">Shu Fai
Cheung</h4>
            
            <h4 data-toc-skip class="date">2024-02-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/modelbpp/blob/HEAD/vignettes/modelbpp.Rmd" class="external-link"><code>vignettes/modelbpp.Rmd</code></a></small>
      <div class="d-none name"><code>modelbpp.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article illustrates how to use <code><a href="../reference/model_set.html">model_set()</a></code> and
other functions from the package <a href="https://sfcheung.github.io/modelbpp/"><code>modelbpp</code></a>
to:</p>
<ul>
<li><p>Fit a set of neighboring models, each has one more or one less
degree of freedom than the original fitted model.</p></li>
<li><p>Compute the BIC posterior probability (BPP), for each model <span class="citation">(Wu et al., 2020)</span>.</p></li>
<li><p>Use BPP to assess to what extent each model is supported by the
data, compared to all other models under consideration.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Fit an SEM model, the original model, as usual in
<code>lavaan</code>.</p></li>
<li>
<p>Call <code><a href="../reference/model_set.html">model_set()</a></code> on the output from Step 1. It will
automatically do the following:</p>
<ul>
<li><p>Enumerate the neighboring models of the original model.</p></li>
<li><p>Fit all the models and compute their BIC posterior probabilities
(BPPs).</p></li>
</ul>
</li>
<li>
<p>Examine the results by:</p>
<ul>
<li><p>printing the output of <code><a href="../reference/model_set.html">model_set()</a></code>, or</p></li>
<li><p>generating a graph using <code><a href="../reference/model_graph.html">model_graph()</a></code>.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a sample dataset, <code>dat_serial_4_weak</code>, with four
variables:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/modelbpp/">modelbpp</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat_serial_4_weak</span><span class="op">)</span></span>
<span><span class="co">#&gt;             x         m1         m2          y</span></span>
<span><span class="co">#&gt; 1  0.09107195  1.2632493  0.7823926  0.3252093</span></span>
<span><span class="co">#&gt; 2 -1.96063838 -0.7745526  0.2002867 -0.6379673</span></span>
<span><span class="co">#&gt; 3  0.20184014  0.2238152  0.2374072  0.4205998</span></span>
<span><span class="co">#&gt; 4 -2.25521708  0.1185732 -0.1727878  0.9320889</span></span>
<span><span class="co">#&gt; 5 -0.15321350  0.1509888  1.1251386  0.6892537</span></span>
<span><span class="co">#&gt; 6 -2.00640303 -0.1595208 -0.1553136 -0.2364792</span></span></code></pre></div>
<div class="section level3">
<h3 id="step-1-fit-the-original-model">Step 1: Fit the Original Model<a class="anchor" aria-label="anchor" href="#step-1-fit-the-original-model"></a>
</h3>
<p>Fit this original model, a serial mediation model, with one direct
path, from <code>x</code> to <code>y</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; This is lavaan 0.6-17</span></span>
<span><span class="co">#&gt; lavaan is FREE software! Please report any bugs.</span></span>
<span><span class="va">mod1</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">m1 ~ x</span></span>
<span><span class="st">m2 ~ m1</span></span>
<span><span class="st">y ~ m2 + x</span></span>
<span><span class="st">"</span></span>
<span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod1</span>, <span class="va">dat_serial_4_weak</span><span class="op">)</span></span></code></pre></div>
<p>This the summary:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit1</span>,</span>
<span>        fit.measures <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; lavaan 0.6.17 ended normally after 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Estimator                                         ML</span></span>
<span><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span><span class="co">#&gt;   Number of model parameters                         7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Number of observations                           100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test User Model:</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Test statistic                                 3.376</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                 2</span></span>
<span><span class="co">#&gt;   P-value (Chi-square)                           0.185</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test Baseline Model:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Test statistic                                39.011</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                 6</span></span>
<span><span class="co">#&gt;   P-value                                        0.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; User Model versus Baseline Model:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Comparative Fit Index (CFI)                    0.958</span></span>
<span><span class="co">#&gt;   Tucker-Lewis Index (TLI)                       0.875</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Loglikelihood and Information Criteria:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Loglikelihood user model (H0)               -216.042</span></span>
<span><span class="co">#&gt;   Loglikelihood unrestricted model (H1)       -214.354</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Akaike (AIC)                                 446.084</span></span>
<span><span class="co">#&gt;   Bayesian (BIC)                               464.320</span></span>
<span><span class="co">#&gt;   Sample-size adjusted Bayesian (SABIC)        442.212</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Root Mean Square Error of Approximation:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   RMSEA                                          0.083</span></span>
<span><span class="co">#&gt;   90 Percent confidence interval - lower         0.000</span></span>
<span><span class="co">#&gt;   90 Percent confidence interval - upper         0.232</span></span>
<span><span class="co">#&gt;   P-value H_0: RMSEA &lt;= 0.050                    0.261</span></span>
<span><span class="co">#&gt;   P-value H_0: RMSEA &gt;= 0.080                    0.628</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Standardized Root Mean Square Residual:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   SRMR                                           0.050</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Standard errors                             Standard</span></span>
<span><span class="co">#&gt;   Information                                 Expected</span></span>
<span><span class="co">#&gt;   Information saturated (h1) model          Structured</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;   m1 ~                                                </span></span>
<span><span class="co">#&gt;     x                 0.187    0.059    3.189    0.001</span></span>
<span><span class="co">#&gt;   m2 ~                                                </span></span>
<span><span class="co">#&gt;     m1                0.231    0.091    2.537    0.011</span></span>
<span><span class="co">#&gt;   y ~                                                 </span></span>
<span><span class="co">#&gt;     m2                0.341    0.089    3.835    0.000</span></span>
<span><span class="co">#&gt;     x                 0.113    0.052    2.188    0.029</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;    .m1                0.278    0.039    7.071    0.000</span></span>
<span><span class="co">#&gt;    .m2                0.254    0.036    7.071    0.000</span></span>
<span><span class="co">#&gt;    .y                 0.213    0.030    7.071    0.000</span></span></code></pre></div>
<p>The fit is acceptable, though the RMSEA is marginal (CFI = 0.958,
RMSEA = 0.083).</p>
</div>
<div class="section level3">
<h3 id="step-2-call-model_set">Step 2: Call <code>model_set()</code><a class="anchor" aria-label="anchor" href="#step-2-call-model_set"></a>
</h3>
<p>Use <code><a href="../reference/model_set.html">model_set()</a></code> to find the neighboring models differ
from the target model by one on model degrees of freedom, fit them, and
compute the BPPs:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_set.html">model_set</a></span><span class="op">(</span><span class="va">fit1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-examine-the-results">Step 3: Examine the Results<a class="anchor" aria-label="anchor" href="#step-3-examine-the-results"></a>
</h3>
<p>To examine the results, just print the output:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; model_set(sem_out = fit1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of model(s) fitted           : 9</span></span>
<span><span class="co">#&gt; Number of model(s) converged        : 9</span></span>
<span><span class="co">#&gt; Number of model(s) passed post.check: 9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The models (sorted by BPP):</span></span>
<span><span class="co">#&gt;             model_df df_diff Prior     BIC   BPP Cumulative</span></span>
<span><span class="co">#&gt; original           2       0 0.111 464.320 0.253      0.253</span></span>
<span><span class="co">#&gt; drop: y~x          3      -1 0.111 464.340 0.251      0.504</span></span>
<span><span class="co">#&gt; add: m1~~y         1       1 0.111 465.900 0.115      0.619</span></span>
<span><span class="co">#&gt; add: y~m1          1       1 0.111 465.900 0.115      0.733</span></span>
<span><span class="co">#&gt; drop: m2~m1        3      -1 0.111 465.953 0.112      0.845</span></span>
<span><span class="co">#&gt; add: m1~y          1       1 0.111 466.142 0.102      0.947</span></span>
<span><span class="co">#&gt; add: m2~x          1       1 0.111 468.575 0.030      0.977</span></span>
<span><span class="co">#&gt; drop: m1~x         3      -1 0.111 469.403 0.020      0.997</span></span>
<span><span class="co">#&gt; drop: y~m2         3      -1 0.111 473.291 0.003      1.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note:</span></span>
<span><span class="co">#&gt; - BIC: Bayesian Information Criterion.</span></span>
<span><span class="co">#&gt; - BPP: BIC posterior probability.</span></span>
<span><span class="co">#&gt; - model_df: Model degrees of freedom.</span></span>
<span><span class="co">#&gt; - df_diff: Difference in df compared to the original/target model.</span></span>
<span><span class="co">#&gt; - Cumulative: Cumulative BIC posterior probability.</span></span></code></pre></div>
<p>The total number of models examined, including the original model, is
9.</p>
<p>The BIC posterior probabilities (BPPs) suggest that the original
model is indeed the most probable model based on BPP. However, the model
with the direct path dropped, <code>drop: y~x</code>, only has slightly
lower BPP (0.251)</p>
<p>This suggests that, with equal prior probabilities <span class="citation">(Wu et al., 2020)</span>, the support for the model
with the direct and without the direct path have similar support from
the data based on BPP.</p>
<p>Alternatively, we can use <code><a href="../reference/model_graph.html">model_graph()</a></code> to visualize the
BPPs and model relations graphically:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_graph.html">model_graph</a></span><span class="op">(</span><span class="va">out1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph1</span><span class="op">)</span></span></code></pre></div>
<p><img src="graph1-1.png"></p>
<p>Each node (circle) represents one model. The larger the BPP, the
larger the node.</p>
<p>The arrow points from a simpler model (a model with larger model
<em>df</em>) to a more complicated model (a model with smaller model
<em>df</em>). If two models are connected by an arrow, then one model
can be formed from another model by adding or removing one free
parameter (e.g., adding or removing one path).</p>
</div>
<div class="section level3">
<h3 id="repeat-step-2-with-user-prior">Repeat Step 2 with User Prior<a class="anchor" aria-label="anchor" href="#repeat-step-2-with-user-prior"></a>
</h3>
<p>In real studies, not all models are equally probable before having
data (i.e., not all models have equal prior probabilities). A researcher
fits the original model because</p>
<ul>
<li><p>its prior probability is higher than other models, at least other
neighboring models (otherwise, it is not worthy of collecting data
assess thi original model), but</p></li>
<li><p>the prior probability is not so high to eliminate the need for
collecting data to see how much it is supported by data.</p></li>
</ul>
<p>Suppose we decide that the prior probability of the original model is
.50: probable, but still needs data to decide whether it is empirically
supported</p>
<p>This can be done by setting <code>prior_sem_out</code> to the desired
prior probability when calling <code><a href="../reference/model_set.html">model_set()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_set.html">model_set</a></span><span class="op">(</span><span class="va">fit1</span>,</span>
<span>                        prior_sem_out <span class="op">=</span> <span class="fl">.50</span><span class="op">)</span></span></code></pre></div>
<p>The prior probabilities of all other models are equal. Therefore,
with nine models and the prior of the target model being .50, the prior
probability of the other eight model is (1 - .50) / 8 or .0625.</p>
<p>This is the printout:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_prior</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; model_set(sem_out = fit1, prior_sem_out = 0.5)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of model(s) fitted           : 9</span></span>
<span><span class="co">#&gt; Number of model(s) converged        : 9</span></span>
<span><span class="co">#&gt; Number of model(s) passed post.check: 9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The models (sorted by BPP):</span></span>
<span><span class="co">#&gt;             model_df df_diff Prior     BIC   BPP Cumulative</span></span>
<span><span class="co">#&gt; original           2       0 0.500 464.320 0.730      0.730</span></span>
<span><span class="co">#&gt; drop: y~x          3      -1 0.062 464.340 0.090      0.821</span></span>
<span><span class="co">#&gt; add: m1~~y         1       1 0.062 465.900 0.041      0.862</span></span>
<span><span class="co">#&gt; add: y~m1          1       1 0.062 465.900 0.041      0.904</span></span>
<span><span class="co">#&gt; drop: m2~m1        3      -1 0.062 465.953 0.040      0.944</span></span>
<span><span class="co">#&gt; add: m1~y          1       1 0.062 466.142 0.037      0.981</span></span>
<span><span class="co">#&gt; add: m2~x          1       1 0.062 468.575 0.011      0.992</span></span>
<span><span class="co">#&gt; drop: m1~x         3      -1 0.062 469.403 0.007      0.999</span></span>
<span><span class="co">#&gt; drop: y~m2         3      -1 0.062 473.291 0.001      1.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note:</span></span>
<span><span class="co">#&gt; - BIC: Bayesian Information Criterion.</span></span>
<span><span class="co">#&gt; - BPP: BIC posterior probability.</span></span>
<span><span class="co">#&gt; - model_df: Model degrees of freedom.</span></span>
<span><span class="co">#&gt; - df_diff: Difference in df compared to the original/target model.</span></span>
<span><span class="co">#&gt; - Cumulative: Cumulative BIC posterior probability.</span></span></code></pre></div>
<p>If the prior of the target is set to .50, then, taking into account
both the prior probabilities and the data, the target model is strongly
supported by the data.</p>
<p>This is the output of <code><a href="../reference/model_graph.html">model_graph()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph1_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_graph.html">model_graph</a></span><span class="op">(</span><span class="va">out1_prior</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph1_prior</span><span class="op">)</span></span></code></pre></div>
<p><img src="out1_prior-1.png"></p>
</div>
</div>
<div class="section level2">
<h2 id="advanced-options">Advanced Options<a class="anchor" aria-label="anchor" href="#advanced-options"></a>
</h2>
<div class="section level3">
<h3 id="more-neighboring-models">More Neighboring Models<a class="anchor" aria-label="anchor" href="#more-neighboring-models"></a>
</h3>
<p>If desired, we can enumerate models “farther away” from the target
model. For example, we can set the maximum difference in model
<em>df</em> to 2, to include models having two more or two less
<em>df</em> than the original model:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_set.html">model_set</a></span><span class="op">(</span><span class="va">fit1</span>,</span>
<span>                      df_change_add <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                      df_change_drop <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>This is the printout. By default, when there are more than 10 models,
only the top 10 models on BPP will be printed:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_df2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; model_set(sem_out = fit1, df_change_add = 2, df_change_drop = 2)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of model(s) fitted           : 18</span></span>
<span><span class="co">#&gt; Number of model(s) converged        : 18</span></span>
<span><span class="co">#&gt; Number of model(s) passed post.check: 18</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The models (sorted by BPP):</span></span>
<span><span class="co">#&gt;                  model_df df_diff Prior     BIC   BPP Cumulative</span></span>
<span><span class="co">#&gt; original                2       0 0.056 464.320 0.214      0.214</span></span>
<span><span class="co">#&gt; drop: y~x               3      -1 0.056 464.340 0.212      0.426</span></span>
<span><span class="co">#&gt; add: m1~~y              1       1 0.056 465.900 0.097      0.523</span></span>
<span><span class="co">#&gt; add: y~m1               1       1 0.056 465.900 0.097      0.620</span></span>
<span><span class="co">#&gt; drop: m2~m1             3      -1 0.056 465.953 0.095      0.714</span></span>
<span><span class="co">#&gt; drop: m2~m1;y~x         4      -2 0.056 465.973 0.094      0.808</span></span>
<span><span class="co">#&gt; add: m1~y               1       1 0.056 466.142 0.086      0.894</span></span>
<span><span class="co">#&gt; add: m2~x               1       1 0.056 468.575 0.025      0.920</span></span>
<span><span class="co">#&gt; drop: m1~x              3      -1 0.056 469.403 0.017      0.936</span></span>
<span><span class="co">#&gt; drop: m1~x;y~x          4      -2 0.056 469.423 0.017      0.953</span></span>
<span><span class="co">#&gt; add: m1~~y;m2~x         0       2 0.056 470.154 0.012      0.965</span></span>
<span><span class="co">#&gt; add: m1~y;m2~x          0       2 0.056 470.154 0.012      0.976</span></span>
<span><span class="co">#&gt; add: m2~x;y~m1          0       2 0.056 470.154 0.012      0.988</span></span>
<span><span class="co">#&gt; drop: m1~x;m2~m1        4      -2 0.056 471.036 0.007      0.995</span></span>
<span><span class="co">#&gt; drop: y~m2              3      -1 0.056 473.291 0.002      0.998</span></span>
<span><span class="co">#&gt; drop: y~m2;y~x          4      -2 0.056 474.819 0.001      0.999</span></span>
<span><span class="co">#&gt; drop: m2~m1;y~m2        4      -2 0.056 474.924 0.001      1.000</span></span>
<span><span class="co">#&gt; drop: m1~x;y~m2         4      -2 0.056 478.374 0.000      1.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note:</span></span>
<span><span class="co">#&gt; - BIC: Bayesian Information Criterion.</span></span>
<span><span class="co">#&gt; - BPP: BIC posterior probability.</span></span>
<span><span class="co">#&gt; - model_df: Model degrees of freedom.</span></span>
<span><span class="co">#&gt; - df_diff: Difference in df compared to the original/target model.</span></span>
<span><span class="co">#&gt; - Cumulative: Cumulative BIC posterior probability.</span></span></code></pre></div>
<p>The number of models examined, including the original model, is
18.</p>
<p>This is the output of <code><a href="../reference/model_graph.html">model_graph()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph1_df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_graph.html">model_graph</a></span><span class="op">(</span><span class="va">out1_df2</span>,</span>
<span>                          node_label_size <span class="op">=</span> <span class="fl">.75</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph1_df2</span><span class="op">)</span></span></code></pre></div>
<p><img src="graph1_df2-1.png"></p>
<p>Note: Due to the number of nodes, <code>node_label_size</code> is
used to reduce the size of the labels.</p>
</div>
<div class="section level3">
<h3 id="excluding-some-parameters-from-the-search">Excluding Some Parameters From the Search<a class="anchor" aria-label="anchor" href="#excluding-some-parameters-from-the-search"></a>
</h3>
<p>When calling <code><a href="../reference/model_set.html">model_set()</a></code>, users can specify parameters
that must be excluded from the list to be added
(<code>must_not_add</code>), or must not be dropped
(<code>must_not_drop</code>).</p>
<p>For example, it may not make sense To add the error covariance
between <code>m1</code> and <code>y</code> (<code>m1~~y</code>). We can
exclude it when calling <code><a href="../reference/model_set.html">model_set()</a></code></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_no_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_set.html">model_set</a></span><span class="op">(</span><span class="va">fit1</span>,</span>
<span>                         must_not_add <span class="op">=</span> <span class="st">"m1~~y"</span><span class="op">)</span></span></code></pre></div>
<p>This is the output:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_no_cov</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; model_set(sem_out = fit1, must_not_add = "m1~~y")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of model(s) fitted           : 8</span></span>
<span><span class="co">#&gt; Number of model(s) converged        : 8</span></span>
<span><span class="co">#&gt; Number of model(s) passed post.check: 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The models (sorted by BPP):</span></span>
<span><span class="co">#&gt;             model_df df_diff Prior     BIC   BPP Cumulative</span></span>
<span><span class="co">#&gt; original           2       0 0.125 464.320 0.286      0.286</span></span>
<span><span class="co">#&gt; drop: y~x          3      -1 0.125 464.340 0.283      0.569</span></span>
<span><span class="co">#&gt; add: y~m1          1       1 0.125 465.900 0.130      0.699</span></span>
<span><span class="co">#&gt; drop: m2~m1        3      -1 0.125 465.953 0.126      0.825</span></span>
<span><span class="co">#&gt; add: m1~y          1       1 0.125 466.142 0.115      0.940</span></span>
<span><span class="co">#&gt; add: m2~x          1       1 0.125 468.575 0.034      0.974</span></span>
<span><span class="co">#&gt; drop: m1~x         3      -1 0.125 469.403 0.023      0.997</span></span>
<span><span class="co">#&gt; drop: y~m2         3      -1 0.125 473.291 0.003      1.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note:</span></span>
<span><span class="co">#&gt; - BIC: Bayesian Information Criterion.</span></span>
<span><span class="co">#&gt; - BPP: BIC posterior probability.</span></span>
<span><span class="co">#&gt; - model_df: Model degrees of freedom.</span></span>
<span><span class="co">#&gt; - df_diff: Difference in df compared to the original/target model.</span></span>
<span><span class="co">#&gt; - Cumulative: Cumulative BIC posterior probability.</span></span></code></pre></div>
<p>The number of models reduced to 8.</p>
<p>This is the plot:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph1_no_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_graph.html">model_graph</a></span><span class="op">(</span><span class="va">out1_no_cov</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph1_no_cov</span><span class="op">)</span></span></code></pre></div>
<p><img src="graph1_no_cov-1.png"></p>
</div>
<div class="section level3">
<h3 id="models-with-constraints">Models With Constraints<a class="anchor" aria-label="anchor" href="#models-with-constraints"></a>
</h3>
<p>If the original model has equality constraints, they will be included
in the search for neighboring models, by default. That is, removing one
equality constraint between two models is considered as a model with an
increase of 1 <em>df</em>.</p>
</div>
<div class="section level3">
<h3 id="recompute-bpps-without-refitting-the-models">Recompute BPPs Without Refitting the Models<a class="anchor" aria-label="anchor" href="#recompute-bpps-without-refitting-the-models"></a>
</h3>
<p>Users can examine the impact of the prior probability of the original
model without refitting the models, by using the output of
<code><a href="../reference/model_set.html">model_set()</a></code> as the input, using the
<code>model_set_out</code> argument:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_new_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_set.html">model_set</a></span><span class="op">(</span>model_set_out <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                            prior_sem_out <span class="op">=</span> <span class="fl">.50</span><span class="op">)</span></span></code></pre></div>
<p>The results are identical to calling <code><a href="../reference/model_set.html">model_set()</a></code> with
the original <code>lavaan</code> output as the input:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out1_new_prior</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; model_set(model_set_out = out1, prior_sem_out = 0.5)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of model(s) fitted           : 9</span></span>
<span><span class="co">#&gt; Number of model(s) converged        : 9</span></span>
<span><span class="co">#&gt; Number of model(s) passed post.check: 9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The models (sorted by BPP):</span></span>
<span><span class="co">#&gt;             model_df df_diff Prior     BIC   BPP Cumulative</span></span>
<span><span class="co">#&gt; original           2       0 0.500 464.320 0.730      0.730</span></span>
<span><span class="co">#&gt; drop: y~x          3      -1 0.062 464.340 0.090      0.821</span></span>
<span><span class="co">#&gt; add: m1~~y         1       1 0.062 465.900 0.041      0.862</span></span>
<span><span class="co">#&gt; add: y~m1          1       1 0.062 465.900 0.041      0.904</span></span>
<span><span class="co">#&gt; drop: m2~m1        3      -1 0.062 465.953 0.040      0.944</span></span>
<span><span class="co">#&gt; add: m1~y          1       1 0.062 466.142 0.037      0.981</span></span>
<span><span class="co">#&gt; add: m2~x          1       1 0.062 468.575 0.011      0.992</span></span>
<span><span class="co">#&gt; drop: m1~x         3      -1 0.062 469.403 0.007      0.999</span></span>
<span><span class="co">#&gt; drop: y~m2         3      -1 0.062 473.291 0.001      1.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note:</span></span>
<span><span class="co">#&gt; - BIC: Bayesian Information Criterion.</span></span>
<span><span class="co">#&gt; - BPP: BIC posterior probability.</span></span>
<span><span class="co">#&gt; - model_df: Model degrees of freedom.</span></span>
<span><span class="co">#&gt; - df_diff: Difference in df compared to the original/target model.</span></span>
<span><span class="co">#&gt; - Cumulative: Cumulative BIC posterior probability.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="many-neighboring-models">Many Neighboring Models<a class="anchor" aria-label="anchor" href="#many-neighboring-models"></a>
</h3>
<p>When a model has a lot of free parameters, the number of neighboring
models can be large and it will take a long time to fit all of them.
Users can enable parallel processing by setting <code>parallel</code> to
<code>TRUE</code> when calling <code><a href="../reference/model_set.html">model_set()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="more-options">More Options<a class="anchor" aria-label="anchor" href="#more-options"></a>
</h3>
<p>Please refer to the help page of <code><a href="../reference/model_set.html">model_set()</a></code> for options
available.</p>
</div>
</div>
<div class="section level2">
<h2 id="further-information">Further Information<a class="anchor" aria-label="anchor" href="#further-information"></a>
</h2>
<p>For further information on other functions, please refer to their
help pages.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-wu_simple_2020" class="csl-entry">
Wu, H., Cheung, S. F., &amp; Leung, S. O. (2020). Simple use of
<span>BIC</span> to assess model selection uncertainty: <span>An</span>
illustration using mediation and moderation models. <em>Multivariate
Behavioral Research</em>, <em>55</em>(1), 1–16. <a href="https://doi.org/10.1080/00273171.2019.1574546" class="external-link">https://doi.org/10.1080/00273171.2019.1574546</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Shu Fai Cheung, Huiping Wu, Shing On Leung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
