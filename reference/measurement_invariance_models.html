<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generate metric and
scalar invariance models and their
partial invariance versions."><title>Measurement Invariance Models — measurement_invariance_models • modelbpp</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Heebo-0.4.9/font.css" rel="stylesheet"><link href="../deps/Red_Hat_Mono-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Measurement Invariance Models — measurement_invariance_models"><meta property="og:description" content="Generate metric and
scalar invariance models and their
partial invariance versions."><meta property="og:image" content="https://sfcheung.github.io/modelbpp/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">modelbpp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3.11</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/modelbpp.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>&lt;General&gt;</h6>
    <a class="dropdown-item" href="../articles/modelbpp.html">Get Started</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/modelbpp/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Measurement Invariance Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/modelbpp/blob/HEAD/R/measurement_invariance.R" class="external-link"><code>R/measurement_invariance.R</code></a></small>
      <div class="d-none name"><code>measurement_invariance_models.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate metric and
scalar invariance models and their
partial invariance versions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">measurement_invariance_models</span><span class="op">(</span></span>
<span>  <span class="va">cfa_out</span>,</span>
<span>  max_free <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  metric <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scalar <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cfa_out</dt>
<dd><p>The output of
<code><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">lavaan::cfa()</a></code>.</p></dd>


<dt>max_free</dt>
<dd><p>The maximum number of
constraints to be released when
generating the partial invariance
models. For example, if set to 1,
then only the partial metric invariance
model only has at most one item allowed
to have different loadings across
group. Default is 1. If set to zero,
then no partial invariance models
will be generated.</p></dd>


<dt>metric</dt>
<dd><p>Logical. If <code>TRUE</code>,
the default, then metric invariance
model and its partial invariance
versions are generated.</p></dd>


<dt>scalar</dt>
<dd><p>Logical. If <code>TRUE</code>,
the default, then scalar invariance
model and its partial invariance
versions are generated.</p></dd>


<dt>progress</dt>
<dd><p>Logical. If <code>TRUE</code>,
the default, progress bars will be
displayed when fitting partial
invariance models.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of <code><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">lavaan::cfa()</a></code></p>


<p>output. The names are automatically
generated to indicate whether a model
is configural, metric, or scalar
invariance, or the item(s) without
between-group constraints on the
loadings (for partial metric
invariance) or intercepts (for
partial scalar invariance).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This a helper function to generate,
based on a multigroup confirmatory
factor analysis (CFA) model with
no between-group equality constraints,
the following models:</p><ul><li><p>A metric invariance model (loadings
constrained to be equal across
groups).</p></li>
<li><p>A scalar invariance model (intercepts
and loadings constrained to be equal
across groups).</p></li>
<li><p>Partial invariance versions of the
previous two models, such as a
model with the loadings of all items,
except for one, constrained to be
equal across groups.</p></li>
</ul><p>The models generated can then be used
in <code><a href="model_set.html">model_set()</a></code> to compute BPPs.</p><div class="section">
<h3 id="requirements">Requirements<a class="anchor" aria-label="anchor" href="#requirements"></a></h3>


<p>The model used as the input needs to
be fitted with no between group
constrains, that is, it is a
configural invariance model. Although
not a must, it is advised to use
the default way to identify each
factor (that is, fixing a loading
to one).</p>
</div>

<div class="section">
<h3 id="implementation">Implementation<a class="anchor" aria-label="anchor" href="#implementation"></a></h3>


<p>This function simply use the
<code>group.partial</code> and <code>group.equal</code>
argument of <code><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">lavaan::cfa()</a></code> to
generate the models.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="model_set.html">model_set()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448" class="external-link">https://orcid.org/0000-0002-9871-9448</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">HolzingerSwineford1939</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># For illustration, only two factors are used</span></span></span>
<span class="r-in"><span><span class="va">HSmod</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">spatial =~ x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">verbal =~ x4 + x5 + x6</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="va">fit_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">HSmod</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>,</span></span>
<span class="r-in"><span>                  group <span class="op">=</span> <span class="st">"school"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit_mi</span> <span class="op">&lt;-</span> <span class="fu">measurement_invariance_models</span><span class="op">(</span><span class="va">fit_config</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fitting 4 partial metric invariance models:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fitting 6 partial scalar invariance models:</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">fit_mi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "config"      "metric"      "scalar"      "spatial=~x2" "spatial=~x3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "verbal=~x5"  "verbal=~x6"  "x1~1"        "x2~1"        "x3~1"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "x4~1"        "x5~1"        "x6~1"       </span>
<span class="r-in"><span><span class="co"># Need to add 'skip_check_sem_out = TRUE' to use multigroup models.</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="model_set.html">model_set</a></span><span class="op">(</span>sem_out <span class="op">=</span> <span class="va">fit_mi</span>,</span></span>
<span class="r-in"><span>                 skip_check_sem_out <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                 progress <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                 parallel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model_set(sem_out = fit_mi, parallel = FALSE, progress = FALSE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     skip_check_sem_out = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of model(s) fitted           : 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of model(s) converged        : 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of model(s) passed post.check: 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The models (sorted by BPP):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             model_df df_diff Prior      BIC   BPP   cfi rmsea Cumulative</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x3~1              23      NA 0.077 5151.234 0.987 0.967 0.078      0.987</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x2~1              23      NA 0.077 5162.048 0.004 0.950 0.096      0.991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> metric            20      NA 0.077 5163.002 0.003 0.970 0.079      0.994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> verbal=~x5        19      NA 0.077 5163.444 0.002 0.977 0.072      0.996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x1~1              23      NA 0.077 5164.566 0.001 0.946 0.100      0.997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> scalar            24      NA 0.077 5165.205 0.001 0.938 0.105      0.998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> verbal=~x6        19      NA 0.077 5165.527 0.001 0.974 0.077      0.999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> spatial=~x3       19      NA 0.077 5167.629 0.000 0.971 0.081      0.999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> spatial=~x2       19      NA 0.077 5167.970 0.000 0.970 0.082      1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x4~1              23      NA 0.077 5168.654 0.000 0.940 0.106      1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x5~1              23      NA 0.077 5169.318 0.000 0.939 0.107      1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x6~1              23      NA 0.077 5170.871 0.000 0.936 0.109      1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> config            16      NA 0.077 5175.449 0.000 0.980 0.072      1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - BIC: Bayesian Information Criterion.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - BPP: BIC posterior probability.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - model_df: Model degrees of freedom.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - df_diff: Difference in df compared to the original/target model.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Cumulative: Cumulative BIC posterior probability.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Since Version 0.1.3.5, the default values of exclude_feedback and</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   exclude_xy_cov changed to TRUE. Set them to FALSE to reproduce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   results from previous versions.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Shu Fai Cheung, Huiping Wu, Shing On Leung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

